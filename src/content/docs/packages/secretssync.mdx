---
title: SecretSync
description: Enterprise-grade secret synchronization with Python bindings
---

import { Card, CardGrid, Tabs, TabItem } from '@astrojs/starlight/components';

**SecretSync** is an enterprise-grade secret synchronization pipeline that syncs secrets from HashiCorp Vault to AWS Secrets Manager. Written in Go for maximum performance, it provides Python bindings via [gopy](https://github.com/go-python/gopy) for seamless integration with the Extended Data ecosystem.

```python
from vendor_connectors.secrets import SecretsConnector

# Run a sync pipeline with one line
SecretsConnector().run_pipeline("pipeline.yaml")
```

<CardGrid>
  <Card title="High Performance" icon="rocket">
    Written in Go with parallel execution, circuit breakers, and smart caching
  </Card>
  <Card title="Python Bindings" icon="seti:python">
    Native Python bindings via gopy with CLI fallback
  </Card>
  <Card title="AI-Ready" icon="sparkles">
    Tools for LangChain, CrewAI, AWS Strands, and MCP
  </Card>
  <Card title="Enterprise Features" icon="shield">
    Two-phase pipeline, versioning, AWS Organizations discovery
  </Card>
</CardGrid>

---

## Prerequisites

Before installing SecretSync, ensure you have the following requirements met:

- **Go**: Version 1.21 or higher
- **Python**: Version 3.10 or higher (for Python bindings)
- **AWS CLI**: Configured with appropriate permissions
- **HashiCorp Vault**: Access to a Vault instance (if using Vault source)

## Installation

<Tabs>
  <TabItem label="Go CLI">
    ```bash
    go install github.com/extended-data-library/secretssync/cmd/secretsync@latest
    ```
  </TabItem>
  <TabItem label="Python (via vendor-connectors)">
    ```bash
    pip install vendor-connectors[secrets]
    ```
  </TabItem>
  <TabItem label="Python (native bindings)">
    ```bash
    # Install binding tools
    pip install pybindgen
    go install golang.org/x/tools/cmd/goimports@latest
    go install github.com/go-python/gopy@latest

    # Clone and build
    git clone https://github.com/extended-data-library/secretssync.git
    cd secretssync
    make python-bindings
    make python-install
    ```
  </TabItem>
</Tabs>

---

## Key Features

### Two-Phase Pipeline Architecture

SecretSync uses a merge → sync architecture for complex secret management:

```
┌─────────────────────────────────────────────────────────────────┐
│                    MERGE PHASE (Optional)                        │
│  Source1 ──┐                                                     │
│  Source2 ──┼──▶ Merge Store (Vault/S3) ──▶ Aggregated Secrets   │
│  Source3 ──┘    (deepmerge, inheritance)                         │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        SYNC PHASE                                │
│  Merge Store ──┬──▶ AWS Account 1 (via STS AssumeRole)          │
│  (or Source)   ├──▶ AWS Account 2                                │
│                └──▶ AWS Account N                                │
└─────────────────────────────────────────────────────────────────┘
```

### AWS Organizations Discovery

Automatically discover and sync to AWS accounts:

```yaml
discovery:
  organizations:
    tag_filters:
      - key: "Environment"
        values: ["production", "staging"]
        operator: "equals"
    ous:
      - "ou-production-12345"
    recursive: true
```

### Secret Versioning

Complete audit trail with S3-based versioning:

```yaml
versioning:
  enabled: true
  s3_bucket: "company-secretsync-versions"
  retention_days: 90
```

---

## Python Usage

### Basic Usage

```python
from vendor_connectors.secrets import SecretsConnector

connector = SecretsConnector()

# Validate configuration
is_valid, message = connector.validate_config("pipeline.yaml")

# Dry run to preview changes
result = connector.dry_run("pipeline.yaml")
print(f"Would sync {result.secrets_processed} secrets")
print(f"  Add: {result.secrets_added}")
print(f"  Modify: {result.secrets_modified}")
print(f"  Remove: {result.secrets_removed}")

# Execute the pipeline
result = connector.run_pipeline("pipeline.yaml")
if result.success:
    print(f"Synced successfully in {result.duration_ms}ms")
```

### Custom Options

```python
from vendor_connectors.secrets import (
    SecretsConnector,
    SyncOptions,
    SyncOperation,
)

connector = SecretsConnector()

options = SyncOptions(
    operation=SyncOperation.SYNC,  # merge, sync, or pipeline
    targets=["production", "staging"],
    parallelism=8,
    continue_on_error=True,
    dry_run=False,
)

result = connector.run_pipeline("pipeline.yaml", options)
```

### AI Agent Integration

```python
from vendor_connectors.secrets import get_tools

# Auto-detect framework (CrewAI, LangChain, or Strands)
tools = get_tools()

# Available tools:
# - secrets_validate_config
# - secrets_run_pipeline
# - secrets_dry_run
# - secrets_get_config_info
# - secrets_get_targets
# - secrets_get_sources
```

---

## CLI Usage

```bash
# Validate configuration
secretsync validate --config pipeline.yaml

# Dry run with visual diff
secretsync pipeline --config pipeline.yaml --dry-run --format side-by-side

# Execute pipeline
secretsync pipeline --config pipeline.yaml

# CI/CD mode (exit codes: 0=no changes, 1=changes, 2=errors)
secretsync pipeline --config pipeline.yaml --dry-run --exit-code
```

---

## Example Configuration

```yaml
# pipeline.yaml
vault:
  address: "https://vault.example.com"
  namespace: "admin"

aws:
  region: "us-east-1"

merge_store:
  vault:
    mount: "secret/merged"

sources:
  api-keys:
    vault:
      path: "secret/api-keys"
  database:
    vault:
      path: "secret/database"

targets:
  Staging:
    imports: [api-keys, database]
    account_id: "111111111111"
  Production:
    inherits: Staging
    account_id: "222222222222"
```

---

## Links

- **GitHub**: [extended-data-library/secretssync](https://github.com/extended-data-library/secretssync)
- **Documentation**: [Python Bindings](#python-usage)
- **Integration**: [vendor-connectors](/api/vendor-connectors/)
